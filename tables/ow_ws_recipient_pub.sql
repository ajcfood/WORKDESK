DROP TABLE WORKDESK.OW_WS_RECIPIENT_PUB CASCADE CONSTRAINTS;

CREATE TABLE WORKDESK.OW_WS_RECIPIENT_PUB
(
  TK_OW           NUMBER(7)                     NOT NULL,
  RECIPIENT_TYPE  VARCHAR2(56 BYTE)             NOT NULL,
  TK_EMPLOYEE     NUMBER(15)                    NOT NULL
)
TABLESPACE WORKDESK_DATA
PCTUSED    40
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          1M
            NEXT             40K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE;

COMMENT ON TABLE WORKDESK.OW_WS_RECIPIENT_PUB IS 'This table contains employees designated to receive worksheet documents from Order Workdesk.';

COMMENT ON COLUMN WORKDESK.OW_WS_RECIPIENT_PUB.TK_OW IS 'The ID of the Worksheet/Template.';

COMMENT ON COLUMN WORKDESK.OW_WS_RECIPIENT_PUB.RECIPIENT_TYPE IS 'The type of recipient.';

COMMENT ON COLUMN WORKDESK.OW_WS_RECIPIENT_PUB.TK_EMPLOYEE IS 'The employee ID of the recipient.';


CREATE UNIQUE INDEX WORKDESK.PK_OW_WS_RECIPIENT_PUB ON WORKDESK.OW_WS_RECIPIENT_PUB
(TK_OW, RECIPIENT_TYPE, TK_EMPLOYEE)
LOGGING
TABLESPACE WORKDESK_INDEX
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          1M
            NEXT             40K
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
           );

ALTER TABLE WORKDESK.OW_WS_RECIPIENT_PUB ADD (
  CONSTRAINT PK_OW_WS_RECIPIENT_PUB
  PRIMARY KEY
  (TK_OW, RECIPIENT_TYPE, TK_EMPLOYEE)
  USING INDEX WORKDESK.PK_OW_WS_RECIPIENT_PUB
  ENABLE VALIDATE);


CREATE OR REPLACE PUBLIC SYNONYM OW_WS_RECIPIENT_PUB FOR WORKDESK.OW_WS_RECIPIENT_PUB;


ALTER TABLE WORKDESK.OW_WS_RECIPIENT_PUB ADD (
  CONSTRAINT FK_OW_WS_RECIPIENT_PUB_TYPE 
  FOREIGN KEY (RECIPIENT_TYPE) 
  REFERENCES WORKDESK.OW_RECIPIENT_TYPE (TYPE)
  ENABLE VALIDATE
,  CONSTRAINT FK_OW_WS_RECIP_PUB_WRKSHT 
  FOREIGN KEY (TK_OW) 
  REFERENCES WORKDESK.OW_WORKSHEET_PUB (TK_OW)
  ENABLE VALIDATE);

GRANT DELETE, INSERT, SELECT, UPDATE ON WORKDESK.OW_WS_RECIPIENT_PUB TO OMS;

GRANT DELETE, INSERT, SELECT, UPDATE ON WORKDESK.OW_WS_RECIPIENT_PUB TO PUBLIC;
